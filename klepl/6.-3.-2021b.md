# Data orchestration

## Bags

TODO: **Are bags pods??**

Bags are a generalization of structures that supports jagged (and allocated) data. The simplest use is a *scalar* bag that combines a struct with a given underlying blob.

- **scalar bag**: structure + blob
- **array bag**: more structures in a blob and a header for the whole bag which uses 2nd serialization of each stored item
- **vector bag**: array with a variable length

## Wrapper

- wrapper perfectly wraps a structure (by deriving it)
  - maybe even a bag
- the structure shall be a pod type and the wrapper as well

### Methods

- all method names shall reflect functor names

- if a functor `func()` has `unwrap_strategy` the `wrapper.func()` method reflecting `structure | func()` returns an unwrapped value
- if a functor `func()` has `wrap_strategy` the `wrapper.func()` method reflecting `structure | func()` returns a wrapped value
- if a functor  `func()` has neither `unwrap_strategy` nor `wrap_strategy` explicitly:
  - `getter_trait` and `top_trait` imply `unwrap_strategy`
  - `transformer_trait` implies `wrap_strategy`

```cpp
1) auto wrapper = wrap(struct);
2) auto structure = unwrap(wrapper);
```

1) wraps the structure `struct` into a wrapper `wrapper`
2) unwraps the wrapper `wrapper` into a structure `struct`

## Update to functors:

- possibility to define `wrap_trait` set to either `unwrap_strategy` and `wrap_strategy`